---
title: "ã€AWS Database Migration Serviceã€‘AWSã®åŸºç¤ã‚’å­¦ã¼ã†"
emoji: "ğŸš´ğŸ»â€â™€ï¸"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["aws","åº§å­¦","æ„Ÿæƒ³"]
published: true
---
# æ¦‚è¦
ã€ŒAWS ã‚¨ãƒãƒ³ã‚¸ã‚§ãƒªã‚¹ãƒˆã‚·ãƒªãƒ¼ã‚ºã€€AWSã®åŸºç¤ã‚’å­¦ã¼ã†ã€ã§â€AWSã®åŸºç¤ã‚’å­¦ã¼ã† ç¬¬äº”åå››å› AWS Database Migration Service ã®ãŠã•ã‚‰ã„â€ã¨ã„ã†ã‚¤ãƒ™ãƒ³ãƒˆã«å‚åŠ ã—ãŸæ„Ÿæƒ³ãƒšãƒ¼ã‚¸ã§ã™ã€‚

# ã€ŒAWS ã‚¨ãƒãƒ³ã‚¸ã‚§ãƒªã‚¹ãƒˆã‚·ãƒªãƒ¼ã‚ºã€€AWSã®åŸºç¤ã‚’å­¦ã¼ã†ã€ã¨ã¯
[AWS ã‚¨ãƒãƒ³ã‚¸ã‚§ãƒªã‚¹ãƒˆã‚·ãƒªãƒ¼ã‚ºã€€AWSã®åŸºç¤ã‚’å­¦ã¼ã†](https://awsbasics.connpass.com)

ä»¥ä¸‹ã€Connpassãƒšãƒ¼ã‚¸ã‚ˆã‚Šå¼•ç”¨

>  Amazon Web Services (AWS)ã¯ç¾åœ¨200ã‚’è¶…ãˆã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã—ã€æ—¥ã€…ã‚µãƒ¼ãƒ“ã‚¹ã®æ‹¡å……ã‚’ç¶šã‘ã¦ã„ã¾ã™ã€‚
> ã“ã®AWS ã‚¨ãƒãƒ³ãƒ³ã‚¸ã‚§ãƒªã‚¹ãƒˆã‚·ãƒªãƒ¼ã‚ºã§ã¯é€±æ¬¡ã§AWSã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ã²ã¨ã¤ã¥ã¤å–ã‚Šä¸Šã’ãªãŒã‚‰ãã®åŸºç¤ã‚’èª¬æ˜ã—ã¦ã„ã åˆå¿ƒè€…ã€ä¸­ç´šè€…ã‚’ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã¨ã—ãŸè¬›åº§ã§ã™ã€‚åˆå¾Œã®ä»•äº‹å‰ã«ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—ã‚’ä¸€ç·’ã«ã—ã¾ã›ã‚“ã‹ï¼Ÿ
> æ³¨æ„ç‚¹ ç™»å£‡è€…ã«ã‚ˆã‚‹ç™ºè¡¨å†…å®¹ã¯ã‚¢ãƒã‚¾ãƒ³ ã‚¦ã‚§ãƒ– ã‚µãƒ¼ãƒ“ã‚¹ ã‚¸ãƒ£ãƒ‘ãƒ³ã¨ã—ã¦ä¸»å‚¬ã—ã¦ã„ã‚‹ã‚‚ã®ã§ã¯ãªãã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ´»å‹•ã®ä¸€ç’°ã¨ã—ã¦å‹‰å¼·ä¼šã®ä¸»å‚¬ã‚’è¡Œã£ã¦ã„ã‚‹ã‚‚ã®ã§ã™ã€‚

æ¯é€±ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼

# è§¦ã£ã¦ã¿ã‚‹ã€‚
## ä»Šå›ã®æ§‹æˆ
![](https://storage.googleapis.com/zenn-user-upload/91358bb7c2ef641b7855a1d2.png)
Aurora MySQLï¼ˆã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ï¼‰ã«å…¥ã£ã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’DMSçµŒç”±ã§S3ã«æµã—ã¦ã¿ã‚ˆã†ã€‚

## äº‹å‰æº–å‚™
RDSã«å…¥ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®é€šã‚Š
```
create table mydb.user (id int, name varchar(10));
create table mydb.product (id int, name varchar(10), col varchar(10));

create unique index idx_user on mydb.user(id);
create unique index idx_product on mydb.product(id);

CREATE VIEW mydb.view_user AS SELECT * FROM mydb.user;
CREATE VIEW mydb.view_product AS SELECT * FROM mydb.product;

INSERT INTO mydb.user VALUES (1, 'A000000001');
INSERT INTO mydb.user VALUES (2, 'B000000002');
INSERT INTO mydb.user VALUES (3, 'C000000003');
INSERT INTO mydb.user VALUES (4, 'D000000004');
INSERT INTO mydb.user VALUES (5, 'E000000005');

INSERT INTO mydb.product VALUES (1, 'A000000001', 'F000000001');
INSERT INTO mydb.product VALUES (2, 'B000000002', 'G000000002');
INSERT INTO mydb.product VALUES (3, 'C000000003', 'H000000003');
INSERT INTO mydb.product VALUES (4, 'D000000004', 'I000000004');
INSERT INTO mydb.product VALUES (5, 'E000000005', 'J000000005');

SELECT * FROM mydb.view_user ORDER BY 1;
id  name
1   A000000001
2   B000000002
3   C000000003
4   D000000004
5   E000000005

SELECT * FROM mydb.product ORDER BY 1;
id  name        col
1   A000000001  F000000001
2   B000000002  G000000002
3   C000000003  H000000003
4   D000000004  I000000004
5   E000000005  J000000005
```
## ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä½œæˆ
### RDSï¼ˆã‚½ãƒ¼ã‚¹ï¼‰ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä½œæˆ
RDSã®ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã‚’ç™»éŒ²
![](https://storage.googleapis.com/zenn-user-upload/aa36c4706619db04fb3be058.png)

### S3ï¼ˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼‰ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä½œæˆ
S3ã®ã‚¢ã‚¯ã‚»ã‚¹æƒ…å ±ã‚’ç™»éŒ²  
ROLEã¯S3ã‚¢ã‚¯ã‚»ã‚¹ã®æ¨©é™ã‚’ã¤ã‘ã¦DMSã‚’ä¿¡é ¼ã€‚
![](https://storage.googleapis.com/zenn-user-upload/98fd095b111a48e67a8af27f.png)

## ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ä½œæˆ
DMSã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚µã‚¤ã‚ºãªã©ã‚’è¨­å®šã€‚ã»ã¼åˆæœŸè¨­å®šã§é‹ç”¨ã€‚
![](https://storage.googleapis.com/zenn-user-upload/1f700e50b096777de9e2efb4.png)

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç§»è¡Œã‚¿ã‚¹ã‚¯
DMSã®ã‚¿ã‚¹ã‚¯ã‚’å®šç¾©ã—ã¾ã™ã€‚ã€€åŸºæœ¬ã¨ã—ã¦ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã™ãŒã€ã“ã“ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã¨ã‹ã‚‚å‡ºæ¥ãã†ã€‚
![](https://storage.googleapis.com/zenn-user-upload/4d63c3f02571ba4932f6aed9.png)
![](https://storage.googleapis.com/zenn-user-upload/7d743e3a55522057d04ed6d3.png)
![](https://storage.googleapis.com/zenn-user-upload/5751f30e4fea052f423e3fa0.png)

## ã‚¿ã‚¹ã‚¯å®Œäº†
å°‘ã—èµ·å‹•ã«æ™‚é–“ã‚’è¦ã—ã¾ã—ãŸãŒã€ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸ
![](https://storage.googleapis.com/zenn-user-upload/4ad0fd43adafb64b8edf26bb.png)

## S3ã®çµæœ
S3ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹â‡¨ãƒ†ãƒ¼ãƒ–ãƒ«â‡¨ãƒ‡ãƒ¼ã‚¿ã¨ã„ã†éšå±¤ã§å‡ºåŠ›ã•ã‚Œã¾ã—ãŸã€‚
![](https://storage.googleapis.com/zenn-user-upload/b80637368d189892d4ddb0c0.png)
![](https://storage.googleapis.com/zenn-user-upload/4e5c1ee14f5683ac23b05a00.png)
![](https://storage.googleapis.com/zenn-user-upload/998fb3e6e7e104f6a29a2541.png)

## S3ã®å‡ºåŠ›çµæœ
user
```
1,A000000001
2,B000000002
3,C000000003
4,D000000004
5,E000000005
```

product
```
1,A000000001,F000000001
2,B000000002,G000000002
3,C000000003,H000000003
4,D000000004,I000000004
5,E000000005,J000000005
```


# æ„Ÿæƒ³
ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ç”»é¢ã§æ„Ÿè¦šã§ãƒãƒãƒãƒã™ã‚‹ã ã‘ã§ã‚‚ãƒ‡ãƒ¼ã‚¿æŠ½å‡ºã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã—ãŸã€‚
ãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚£ãƒ«ã‚¿ã‚„æ–‡å­—ã‚³ãƒ¼ãƒ‰ã®è©±ã¯ã‚ã‚Šã¾ã™ãŒã€ã“ã“ã¾ã§æ¥½ã ã¨S3ã«ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã«ä½¿ã†è¦ä»¶ã§ã‚‚ã‚ã‚Šãªã‚“ï¼Ÿã£ã¦æ€ã£ãŸã‚Šã—ã¾ã—ãŸã€‚

ã“ã‚“ãªæ„Ÿã˜ã€‚
![](https://storage.googleapis.com/zenn-user-upload/d4c359f3921ba72772af36a0.png)
